<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<html lang="ko" xmlns:sec="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="UTF-8">
    <title>Game</title>
    <meta data-n-head="true" name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <link rel="stylesheet" th:href="@{../static/bootstrap-5.1.3-dist/css/bootstrap.css}">
    <link rel="stylesheet" th:href="@{../static/css/game.css}">
</head>
<body>
    <!-- HEADER -->
    <div th:insert="common/header.html" id="header"></div>

    <div class="mainContent">
        <div class="View_Game">
            <iframe src="https://ingukoh.github.io/BungterMelon_Marge/" id="iframe_game" class="iframe_game">

            </iframe>
        </div>

        <div id="input_gameScore" >
            <form action="/game_BungterMelon" method="post" name="post_gameScore" id="post_gameScore" ><!--onsubmit="return false"-->
                <input type="text" id="player_Num" name="player_Num" th:value="${uID_Info.getUID_Num()}">
                <input type="text" id="gameScore" name="gameScore" th:value=0>
                <input type="text" id="uID" name="uID" th:value="${Login_uID}">
                <button type="submit" id="btn_submit" onclick="log()">게임 점수 등록</button>
            </form>
        </div>

        <div id="go_location">
            <button type="button" onclick="location.href='/list/?page=1'">리스트</button>
        </div>

    </div>


    <!-- FOOTER -->
    <div th:insert="common/footer.html" id="footer"></div>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>

    <script th:inline="javascript">
        function log(){
            console.log(document.getElementById("uID").value);
        }
    </script>

    <script type="text/javascript">
        var input_score = document.getElementById("gameScore");

        window.addEventListener('message', function(e) {
            console.log('메세지 받음');
            var score_DATA = e.data;

            console.log('e : ' + score_DATA["childData"]); //게임 점수 받기

            if(e.data.childData != null){
                alert("받음받음받음 받음 받음!!!!!!!!!!!!!")
                input_score.value = score_DATA["childData"];
            }
        });
    </script>

</body>
</html>
